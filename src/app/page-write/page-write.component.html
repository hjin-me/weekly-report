<mat-card class="weekly-container">
  <mat-card-header>
    <mat-card-title>填写周报</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div *ngFor="let w of works; last as l">
      <div fxLayout="row" fxLayoutGap="8px" style="padding: 16px 0">
        <div fxFlex="10 0 10px">
          <div fxLayout="row" fxLayoutGap="8px">
            <div fxFlex="6 0 10px">
              <mat-form-field class="form-full-width">
                <mat-select placeholder="项目编号" [(value)]="w.project">
                  <mat-option *ngFor="let p of projects" [value]="p.id">
                    {{p.name}}({{p.id}})
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div fxFlex="3 0 10px">
              <mat-form-field class="form-full-width">
                <mat-select placeholder="任务模块" [(value)]="w.task">
                  <mat-option *ngFor="let task of w.project | task:projects" [value]="task">
                    {{task}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div fxFlex="3 0 10px">
              <mat-form-field class="form-full-width">
                <input matInput type="text" placeholder="需求人">
              </mat-form-field>
            </div>
          </div>

          <div style="padding-left: 60px">
            <mat-form-field class="form-full-width">
        <textarea matInput placeholder="工作内容" [(ngModel)]="w.work" mat-autosize="true">
        </textarea>
            </mat-form-field>
          </div>

        </div>
        <div fxFlex="8 0 10px">
          <app-work-time [(value)]="w.time" [year]="2017" [week]="1"></app-work-time>
          <div>
            <mat-form-field class="form-full-width">
        <textarea matInput placeholder="遇到的问题" [(ngModel)]="w.problem" mat-autosize="true">
        </textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
      <mat-divider *ngIf="!l"></mat-divider>
    </div>

  </mat-card-content>
  <mat-card-actions>
    <button mat-button>提交</button>
  </mat-card-actions>
</mat-card>

<div style="margin: 10px 8px">


  <pre><code>
 {{works | json}}
</code></pre>
</div>
